<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="lf-record.html">
<link rel="import" href="lf-transfer.html">
<link rel="import" href="lf-record-list.html">
<link rel="import" href="sub-header-styles.html">

<dom-module id="lf-journal">

    <template>        

        <style include="iron-flex iron-flex-alignment sub-header-styles"></style>
        <style>
            :host {
                display: block;
            }

            paper-material {
                @apply(--layout-self-start);
                margin: 0px 5px;
                min-width: 100px;
                max-width: 768px;
            }

            .main {
                padding: 16px;
            }
        </style>

        <lf-record-repository app="[[app]]" list="{{records}}">
        </lf-record-repository>

        <nav class="horizontal layout justified">
            <paper-tabs noink selected="0" scrollable class="flex">
                <paper-tab>All</paper-tab>
                <paper-tab>Bank Account</paper-tab>
                <paper-tab>Credit Card</paper-tab>
                <paper-tab>Cash</paper-tab>
            </paper-tabs>
        </nav>

        <div class="main horizontal layout center-justified">            
            <paper-material elevation="1" class="flex">
                <div class="horizontal layout justified">
                    <h3 class="flex"></h3>
                    <paper-button on-tap="newRecord">New Record</paper-button>
                    <paper-button on-tap="newTransfer">New Transfer</paper-button>
                </div>

                <lf-record-list
                    app="[[app]]"
                    on-item-tap="edit">
                </lf-record-list>
            </paper-material>

            <iron-collapse id="details" horizontal class="flex">
                <paper-material elevation="1">
                    <lf-record id="recordForm" app="[[app]]" on-detail-close="hideDetails"></lf-record>
                </paper-material>
            </iron-collapse>

        </div>

        <lf-transfer id="transferForm" app="[[app]]"></lf-transfer>
        
    </template>

    <script>
        Polymer({
            is: 'lf-journal',

            properties: {
                app: Object
            },

            newTransfer: function() {
                this.$.transferForm.show();
            },

            newRecord: function() {
                this.$.recordForm.show();
                this.$.details.show();
            },

            edit: function(e) {                
                var item = e.detail.item;
                if (item.type == "transfer") {
                    this.$.transferForm.show(item.$key);
                } else {
                    this.$.recordForm.show(item.$key);
                }        
                this.$.details.show();
            },

            hideDetails: function(e) {
                this.$.details.hide();
            },
        });
    </script>

</dom-module>